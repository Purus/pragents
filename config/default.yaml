# Default Configuration for Code Coverage Agent

git:
  provider: azure_devops
  organization_url: ${AZURE_DEVOPS_ORG_URL}
  project: ${AZURE_DEVOPS_PROJECT}
  token: ${AZURE_DEVOPS_PAT}
  base_branch: main
  branch_prefix: "coverage-improvement"

sonarqube:
  url: ${SONAR_URL}
  token: ${SONAR_TOKEN}
  project_key: ${SONAR_PROJECT_KEY}
  coverage_threshold: 90  # Minimum acceptable code coverage percentage
  metrics:
    - coverage
    - line_coverage
    - branch_coverage

llm:
  provider: ${LLM_PROVIDER:openai}  # Options: openai, anthropic, azure_openai, google
  model: gpt-4  # Model name (provider-specific)
  api_key: ${OPENAI_API_KEY}  # Will vary based on provider
  temperature: 0.2  # Lower = more deterministic
  max_tokens: 4000
  # Provider-specific settings
  azure_openai:
    endpoint: ${AZURE_OPENAI_ENDPOINT:}
    deployment: ${AZURE_OPENAI_DEPLOYMENT:}
    api_version: "2024-02-15-preview"

workflow:
  max_retries: 3  # Number of retries for failed steps
  timeout_seconds: 3600  # Maximum workflow duration
  parallel_test_generation: false  # Generate tests in parallel (experimental)
  max_tests_per_file: 10  # Maximum tests to generate per file
  prioritize_by_complexity: true  # Prioritize complex functions

code_analysis:
  languages:
    - python  # Currently only Python is supported
  exclude_patterns:
    - "*/tests/*"
    - "*/test_*"
    - "*/__pycache__/*"
    - "*/venv/*"
    - "*/node_modules/*"
  min_function_lines: 3  # Minimum lines for a function to require testing

test_generation:
  framework: pytest  # Testing framework to use
  include_fixtures: true
  include_mocks: true
  test_file_pattern: "test_{module}.py"
  test_directory: "tests"

api:
  host: ${API_HOST:0.0.0.0}
  port: ${API_PORT:8000}
  cors_origins:
    - "*"  # In production, specify exact origins
  enable_docs: true  # Enable Swagger/ReDoc documentation
  max_concurrent_workflows: 5

ui:
  framework: ${UI_FRAMEWORK:streamlit}  # streamlit or gradio
  port: ${UI_PORT:8501}
  theme: dark
  title: "Code Coverage Agent"
  description: "Automated code coverage improvement system"

logging:
  level: INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/agent.log"
  max_bytes: 10485760  # 10MB
  backup_count: 5
